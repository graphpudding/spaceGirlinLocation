{"code":"!function(e){function n(n){for(var r,i,s=n[0],l=n[1],u=n[2],d=0,m=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&m.push(o[i][0]),o[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(c&&c(n);m.length;)m.shift()();return a.push.apply(a,u||[]),t()}function t(){for(var e,n=0;n<a.length;n++){for(var t=a[n],r=!0,s=1;s<t.length;s++){var l=t[s];0!==o[l]&&(r=!1)}r&&(a.splice(n--,1),e=i(i.s=t[0]))}return e}var r={},o={0:0},a=[];function i(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=e,i.c=r,i.d=function(e,n,t){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},i.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&\"object\"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,\"default\",{enumerable:!0,value:e}),2&n&&\"string\"!=typeof e)for(var r in e)i.d(t,r,function(n){return e[n]}.bind(null,r));return t},i.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(n,\"a\",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p=\"\";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=n,s=s.slice();for(var u=0;u<s.length;u++)n(s[u]);var c=l;a.push([124,1]),t()}({124:function(e,n,t){t(125),e.exports=t(319)},316:function(e,n,t){},317:function(e,n){},319:function(e,n,t){\"use strict\";t.r(n);t(311),t(316),t.p,t(317);var r=t(1);t(318);function o(e,n,t,r,o,a,i){try{var s=e[a](i),l=s.value}catch(e){return void t(e)}s.done?n(l):Promise.resolve(l).then(r,o)}function a(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var i=e.apply(n,t);function s(e){o(i,r,a,s,l,\"next\",e)}function l(e){o(i,r,a,s,l,\"throw\",e)}s(void 0)}))}}var i=function(){var e=!1;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(navigator.userAgent)&&(e=!0),\"MacIntel\"===navigator.platform&&navigator.maxTouchPoints>1&&(e=!0),e},s={blend:0,endPosition:\"\"},l=function(e,n,t){return Math.min(Math.max(e,n),t)};window.local=s,s.curSpeed=0,s.minSpeed=.02,s.RSpeed=.06,s.WSpeed=.06,s.idleR=1,s.walkR=4;var u=[],c=document.getElementById(\"babylon\"),d=null,m=null,h=null,p=function(){return new r.Engine(c,!0,{preserveDrawingBuffer:!0,stencil:!0,disableWebGL2Support:!1})};var f=function(){var e=a(regeneratorRuntime.mark((function e(){var n,t,o,a,i,l,c,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(){s.camera=new r.ArcRotateCamera(\"heroCamera\",Math.PI/2,Math.PI/4,10,new r.Vector3(0,-5,0),n),n.activeCamera=s.camera},a=function(){r.SceneLoader.AppendAsync(\"scene/\",t[o],n).then((function(){o<t.length-1?(n.meshes.forEach((function(e,n){n>2&&e.setEnabled(!1),e.setParent(null)})),o++,a()):(u.push(n.getMeshByName(\"ground\")),g(n),b(s.hero,u),P(n))}))},e.next=4,new Promise((function(e,n){setTimeout((function(){e(!0)}),500)}));case 4:return e.sent,e.next=7,r.SceneLoader.LoadAsync(\"scene/\",\"Girl_animated_ready.glb\",d);case 7:return n=e.sent,s.hero=n.getMeshByName(\"__root__\"),n.getMeshByName(\"__root__\").name=\"rootgirl\",n.getMaterialByName(\"Hair_1\").albedoColor.set(0,230/255,20/255),n.getMaterialByName(\"Hair_0\").albedoColor.set(1,0,0),n.getMaterialByName(\"Material #108\").albedoColor.set(1,0,0),n.getMaterialByName(\"Hair_1\").transparencyMode=2,n.getMaterialByName(\"Hair_1\").albedoTexture.hasAlpha=!0,n.meshes.forEach((function(e,n){e.name+=\"girl\"})),t=[\"arena_no_1.glb\"],o=0,a(),i(),(l=new r.PointLight(\"light\",new r.Vector3(-31,16,-1.71),n)).diffuse.set(.337,.58,.706),l.intensity=2e3,(c=new r.PointLight(\"light\",new r.Vector3(25,27,6.22),n)).diffuse.set(.945,.318,.027),c.intensity=2500,(m=new r.HDRCubeTexture(\"scene/textures/blackhole-03-low.hdr\",n,128,!1,!0,!1,!0)).name=\"runyonCanyon\",m.level=1,n.environmentIntensity=.01,m.gammaSpace=!1,n.environmentTexture=m,n.createDefaultSkybox(n.environmentTexture,!0,1e3),n.getMeshByName(\"hdrSkyBox\").visibility=0,n.clearColor.set(0,0,0),e.abrupt(\"return\",n);case 36:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(p()),e.prev=1,e.abrupt(\"return\",p());case 5:return e.prev=5,e.t0=e.catch(1),console.log(\"the available createEngine function failed. Creating the default engine instead\"),e.abrupt(\"return\",p());case 9:case\"end\":return e.stop()}}),e,null,[[1,5]])})));return function(){return e.apply(this,arguments)}}();function g(e){function n(){s.pointerTimer=0,s.thisCanvas=d.getRenderingCanvas(),s.mouseDown=!1,s.thisCanvas.addEventListener(\"pointerdown\",(function(n){s.pointerTimer=0,v(!0),s.mouseDown=!0,s.eInfo=n;var r=e.pick(n.clientX,n.clientY);t(r),r.pickedMesh})),s.thisCanvas.addEventListener(\"pointerup\",(function(){s.mouseDown=!1,v(!1),s.pointerTimer>1&&(s.endPosition=s.hero.position)})),s.thisCanvas.addEventListener(\"pointermove\",(function(e){s.mouseDown&&(s.eInfo=e)}))}function t(e){e.hit,e.hit&&\"ground\"==e.pickedMesh.name&&(s.endPosition=e.pickedPoint)}function o(e){s.idleParam.weight=1-l(e,0,1),s.idleParam.anim.setWeightForAllAnimatables(s.idleParam.weight),s.walkParam.weight=1-Math.abs(e-1),s.walkParam.anim.setWeightForAllAnimatables(s.walkParam.weight),s.runParam.weight=l(e-1,0,1),s.runParam.anim.setWeightForAllAnimatables(s.runParam.weight),s.curSpeed=s.runParam.weight*s.RSpeed+s.walkParam.weight*s.WSpeed,e<.01&&(s.curSpeed=0)}e.meshes.forEach((function(e,n){e.isPickable=!1,\"ground\"==e.name&&(e.visibility=0,e.isPickable=!0),\"walls\"==e.name&&(e.visibility=0,e.checkCollisions=!0),-1==e.name.search(\"girl\")&&(e.setParent(null),e.receiveShadows=!0)})),s.hero.position.set(-40.557757203789606,5.553006882577251,4.107644696583529),s.hero.rotation.y=.11000000000000164,s.hero.rotationQuaternion=null,s.hero.scaling.set(.15,.15,.15),s.endPosition=s.hero.position,e.getAnimationGroupByName(\"Idle\").name=\"heroIdle\",s.idleAnim=e.animationGroups.find((function(e){return\"heroIdle\"===e.name})),s.idleParam={name:\"heroIdle\",anim:s.idleAnim,weight:1},s.idleAnim.play(!0),s.idleAnim.setWeightForAllAnimatables(1),e.getAnimationGroupByName(\"Walk\").name=\"heroWalk\",s.walkAnim=e.animationGroups.find((function(e){return\"heroWalk\"===e.name})),s.walkParam={name:\"heroWalk\",anim:s.walkAnim,weight:0},s.walkAnim.play(!0),s.walkAnim.setWeightForAllAnimatables(1),e.getAnimationGroupByName(\"Run\").name=\"heroRun\",s.runAnim=e.animationGroups.find((function(e){return\"heroRun\"===e.name})),s.runParam={name:\"heroRun\",anim:s.runAnim,weight:0},s.runAnim.play(!0),s.runAnim.setWeightForAllAnimatables(1),n(),s.mouseMove=e.onBeforeRenderObservable.add((function(){if(s.fps>15){var e=new r.Vector3(s.hero.position.x,s.hero.position.y,s.hero.position.z),n=new r.Vector3(s.endPosition.x,s.endPosition.y,s.endPosition.z),t=e.subtract(n).normalize(),a=s.hero.forward,i=r.Vector3.Cross(a,t).y<0?1:-1;e.subtract(n).length()<s.idleR?y(\"blend\",0,s.fps/3):e.subtract(n).length()<s.walkR?y(\"blend\",1,s.fps/2):y(\"blend\",2,s.fps/2),s.blend<.2?o(0):o(s.blend),s.hero.moveWithCollisions(s.hero.forward.scaleInPlace(s.curSpeed)),Math.abs(r.Vector3.Cross(a,t).y)>s.rotSpeed&&(s.hero.rotation.y+=s.rotSpeed*i)}})),function(e){s.camTarget={},s.camTarget.targetName=\"hero\",s.camTarget.position=s.hero.position,s.camTarget.rotation=s.hero.rotation,s.cameraParent=r.MeshBuilder.CreateBox(\"CB\",{height:.01,width:.01,depth:.01}),s.cameraParent.visibility=0,s.cameraParent.position=new r.Vector3(s.hero.position.x,s.hero.position.y+2.3,s.hero.position.z),s.cameraParent.rotation=new r.Vector3(s.hero.rotation.x,s.hero.rotation.y,s.hero.rotation.z),s.curCamPos=new r.Vector3(-.04231647145375691,2.5949745264318524,-6.405287094651479),s.camera.setPosition(new r.Vector3(s.curCamPos.x,s.curCamPos.y,s.curCamPos.z)),s.camera.target=new r.Vector3(0,0,0),s.camera.parent=s.cameraParent,s.lazyCam=e.onBeforeRenderObservable.add((function(){if(s.fps>15){var e=new r.Vector3(s.camTarget.position.x,s.camTarget.position.y+2.3,s.camTarget.position.z).subtract(s.cameraParent.position),n=e.length()/(s.fps/3);i()&&(n=e.length()/10);var t=new r.Vector3(e.x,e.y,e.z).normalize().multiplyByFloats(n,n,n);s.cameraParent.position.x+=t.x,s.cameraParent.position.y+=t.y,s.cameraParent.position.z+=t.z}})),s.lazyCamR=e.onBeforeRenderObservable.add((function(){if(s.fps>15){var e=s.camTarget.rotation.subtract(s.cameraParent.rotation),n=e.length()/s.fps;i()&&(n=e.length()/10);var t=new r.Vector3(e.x,e.y,e.z).normalize().multiplyByFloats(n,n,n);s.cameraParent.rotation.x+=t.x,s.cameraParent.rotation.y+=t.y,s.cameraParent.rotation.z+=t.z}}))}(e),s.someActions=e.onBeforeRenderObservable.add((function(){s.mouseDown&&t(e.pick(s.eInfo.clientX,s.eInfo.clientY));s.fps=d.getFps().toFixed(),s.RSpeed=9.7125/d.getFps().toFixed(),s.WSpeed=1.825*1.45/d.getFps().toFixed(),s.rotSpeed=.125*d.getFps().toFixed()/75,s.mRotSpeed=.07*75/d.getFps().toFixed(),s.distR=.95+s.curSpeed*s.fps/6})),n()}function y(e,n,t){s[e]>n?s[e]-=1/t:s[e]+=1/t}function v(e){e?s.timer=setInterval((function(){s.pointerTimer+=.1}),10):clearInterval(s.timer)}function b(e,n){e.rayBox=r.MeshBuilder.CreateBox(\"rayBox\",{height:.1,width:.1,depth:.1},m),e.rayBox.parent=e,e.rayBox.position=new r.Vector3(0,.7,0),e.rayBox.visibility=0;var t=new r.Ray,o=new r.RayHelper(t),a=new r.Vector3(0,-1*Math.PI,0);o.attachToMesh(e.rayBox,a,e.rayBox.position,20),m.onBeforeRenderObservable.add((function(){e.rayBox.position=new r.Vector3(0,.7,0);var o=t.intersectsMeshes(n);o.length&&(s.hero.position.y=o[0].pickedPoint.y)}))}function P(e){setTimeout((function(){s.shadowGenerator=new r.ShadowGenerator(1024,e.lights[0]),s.shadowGenerator.blurKernel=4,s.shadowGenerator.useBlurExponentialShadowMap=!0,s.shadowGenerator.blurBoxOffset=4,s.shadowGenerator.addShadowCaster(s.hero),s.shadowGenerator1=new r.ShadowGenerator(1024,e.lights[1]),s.shadowGenerator1.blurKernel=4,s.shadowGenerator1.useBlurExponentialShadowMap=!0,s.shadowGenerator1.blurBoxOffset=4,s.shadowGenerator1.addShadowCaster(s.hero),document.getElementById(\"glslCanvas\").remove()}),3e3)}window.initFunction=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:if(d=e.sent){e.next=5;break}throw\"engine should not be null.\";case 5:return e.next=7,f();case 7:m=e.sent,window.scene=m;case 9:case\"end\":return e.stop()}}),e)}))),window.initFunction().then((function(){h=m,d.runRenderLoop((function(){h&&h.activeCamera&&h.render()}))})),window.addEventListener(\"resize\",(function(){d.resize()}))}});","extractedComments":[]}